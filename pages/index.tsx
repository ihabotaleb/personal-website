import type { NextPage, NextComponentType } from "next";
import Head from "next/head";
import Image from "next/image";
import { useWindowSize } from 'usehooks-ts'
import { useEffect, useRef, useState } from "react"

const Home: NextPage = () => {
  const divRef = useRef<HTMLDividerElement|null>(null);
  const titleRef = useRef<HTMLHeadingElement|null>(null);
  const pagesRef = useRef(null);
  const svgRef = useRef(null);

  let titleH = 0;
  let titleW = 0;

  const [titleDimens, setTitleDimens] = useState<null | [number, number]>(null);

  useEffect(() => {
    if (titleRef.current) {
      const titleW = titleRef.current.offsetWidth;
      const titleH = titleRef.current.offsetHeight;
      setTitleDimens([titleW, titleH]);
    }
  },[titleRef.current]);
  
  const [pageDimens, setPageDimens] = useState<null | [number, number]>(null);

  useEffect(() => {
    if (divRef.current) {
      const divW = divRef.current.clientWidth;
      const divH = divRef.current.clientHeight;
      setPageDimens([divW, divH]);
    }
  },[divRef.current]);
  
  let circle_x = 0;
  let circle_y = 0;
  if (titleDimens) {
   circle_x = titleDimens[0];
   circle_y = titleDimens[1];
  }

  let width = 0;
  let height = 0;
  if (pageDimens) {
    width = pageDimens[0];
    height = pageDimens[1];
  }
  
  return (
    <div>
      <Head>
        <title>Ibrahim Abotaleb</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main ref={divRef}>
        <div className="min-w-[100wh] h-[100vh] grid grid-cols-2">
          <div className="flex-1 mr-2 boxcent h-[100%] w-[100%]" ref={titleRef}>
            <svg className="behind" viewBox={"0,0,"+width+","+height}>
              <g transform={"translate("+ circle_x * (8.5/9) +", "+circle_y / 2+") rotate(15)"}>
              <ellipse cx={0} cy={0} rx={190} ry={90} fill="none" stroke="#000" strokeWidth={0.5}/>
              </g>
            </svg>
            <h1 className="title boxcent h-[100%] w-[100%]">Ibrahim Abotaleb</h1>
          </div>
          <div className="grid boxcent grid-row-4 ml-3 mt-[25vh] mb-[25vh] items" ref={pagesRef}>
            <a>About</a>
            <a>Resume</a>
            <a>Projects</a>
            <a>Design Portfolio</a>
          </div>
        </div>
      </main>
    </div>
  );
};

export default Home;